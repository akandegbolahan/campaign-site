(()=>{"use strict";const e=window.React,t=window.wp.plugins,s=window.wp.blockEditor,n=window.wp.components,o=window.wp.i18n,i=window.wp.compose,c=window.wp.data,l=window.wp.primitives,a=(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:24,height:24},(0,e.createElement)(l.Path,{d:"M30.731 8.16c-0.005-0.035-0.011-0.066-0.019-0.095l0.001 0.005c-0.031-0.134-0.094-0.249-0.182-0.342l0 0-6.297-6.296c-0.093-0.087-0.208-0.15-0.336-0.181l-0.005-0.001c-0.026-0.008-0.058-0.014-0.091-0.019l-0.004-0c-0.026-0.007-0.059-0.014-0.092-0.018l-0.004-0h-9.445c-0.414 0-0.75 0.336-0.75 0.75v0 22.038c0 0.414 0.336 0.75 0.75 0.75h15.742c0.414-0 0.75-0.336 0.75-0.75v0-15.742c-0.005-0.038-0.012-0.071-0.020-0.103l0.001 0.005zM24.453 3.773l3.736 3.735h-3.736zM15.008 23.25v-20.538h7.945v5.546c0 0.414 0.336 0.75 0.75 0.75h5.547v14.242zM17.742 27.25c-0.414 0-0.75 0.336-0.75 0.75v0 1.27h-14.242v-20.539h7.25c0.414 0 0.75-0.336 0.75-0.75s-0.336-0.75-0.75-0.75v0h-8c-0.414 0-0.75 0.336-0.75 0.75v0 22.039c0 0.414 0.336 0.75 0.75 0.75h15.742c0.414-0 0.75-0.336 0.75-0.75v0-2.020c-0-0.414-0.336-0.75-0.75-0.75v0z"})),r=(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:24,height:24},(0,e.createElement)(l.Path,{d:"M3 21h5v-1H4V4h2v2h10V4h2v3h.4a.989.989 0 0 1 .6.221V3h-3V2h-3a2 2 0 0 0-4 0H6v1H3zM7 3h3V1.615A.615.615 0 0 1 10.614 1h.771a.615.615 0 0 1 .615.615V3h3v2H7zm4 14h9v1h-9zM9 8v16h13V11.6L18.4 8zm12 15H10V9h7v4h4zm0-11h-3V9h.31L21 11.69zm-10 2h9v1h-9zm0 6h7v1h-7z"}),(0,e.createElement)(l.Path,{d:"M0 0h24v24H0z",fill:"none"})),d=e=>null==e||"object"==typeof e&&0===Object.keys(e).length||"string"==typeof e&&0===e.trim().length||!1===e,u=window.wp.blocks,b=e=>{const{attributes:t}=(0,u.getBlockType)(e),s=Object.keys(t).filter((e=>{let s=t[e];return s.hasOwnProperty("excludeCopy")&&s.excludeCopy}));return d(s)?[]:s},p=(e,t)=>{if(d(e))return;let s={},n=Object.keys(e),o=n.length,i=0;const c=["blocksCSS","commonStyle","blockID","blockClass",...b(t)];for(;i<o;){const t=n[i],o=e[t];c.includes(t)||(s[t]=o),i++}return d(s)?void 0:s},h=({selectedClientIds:t,onClose:s})=>{const{createSuccessNotice:l}=(0,c.dispatch)("core/notices"),r=(0,i.useCopyToClipboard)((function(){const e=t&&t.map((e=>{const{getBlock:t}=(0,c.select)("core/block-editor"),s=t(e),{name:n,attributes:o}=s;return{attributes:p(o,n),name:n,copyFrom:e}}));return JSON.stringify(e)}),(function(){l((0,o.__)("Style Copied Successfully","gutenkit-blocks-addon"),{type:"snackbar",isDismissible:!0}),s()}));return(0,e.createElement)(n.MenuItem,{icon:a,label:(0,o.__)("Gutenkit Copy Style","gutenkit-blocks-addon"),className:"gutenkit-copy-button",ref:r},(0,o.__)("Gutenkit Copy Style"))},k=({selectedClientIds:t,onClose:s})=>(0,e.createElement)(n.MenuItem,{icon:r,label:(0,o.__)("Gutenkit Paste Style","gutenkit-blocks-addon"),onClick:()=>{(async(e,t)=>{const{createErrorNotice:s,createSuccessNotice:n}=(0,c.dispatch)("core/notices"),{getBlockName:i}=(0,c.select)("core/block-editor"),{updateBlockAttributes:l}=(0,c.dispatch)("core/block-editor"),{isNull:a}=window.gutenkit.helpers;try{if(!window.navigator.clipboard)return void s((0,o.__)("Unable to paste styles. This feature is only available on secure (https) sites in supporting browsers."),{type:"snackbar"});const t=await navigator.clipboard.readText();if(a(t)||!t.includes("gutenkit")||!t.includes("attributes")||!t.includes("name")||!t.includes("copyFrom"))return void s((0,o.__)("Unable to paste styles. Block styles couldn't be found within the copied content.","gutenkit-blocks-addon"),{type:"snackbar",isDismissible:!0});const c=JSON.parse(t);if(!Array.isArray(c)||c.length!==e.length)return void s((0,o.__)("Unable to paste styles. Block styles couldn't be found within the copied content.","gutenkit-blocks-addon"),{type:"snackbar",isDismissible:!0});if(!e.every(((e,t)=>{const s=i(e),{name:n}=c[t];return n===s})))return void s((0,o.__)("Unable to paste styles. Block styles couldn't be found within the copied content.","gutenkit-blocks-addon"),{type:"snackbar",isDismissible:!0});for(let t=0;t<c.length;t++){const{name:n,attributes:a,copyFrom:r}=c[t],d=e[t];if(n!==i(d))return void s((0,o.__)("Unable to paste styles. Block styles couldn't be found within the copied content.","gutenkit-blocks-addon"),{type:"snackbar",isDismissible:!0});if(r===d)return void s((0,o.__)("Unable to paste styles. You can't paste styles from the same block.","gutenkit-blocks-addon"),{type:"snackbar",isDismissible:!0});l(d,{...a})}n((0,o.__)("Style Pasted Successfully","gutenkit-blocks-addon"),{type:"snackbar",isDismissible:!0})}catch(e){return void s((0,o.__)("Unable to paste styles. Please allow browser clipboard permissions before continuing.","gutenkit-blocks-addon"),{type:"snackbar",isDismissible:!0})}t()})(t,s)},className:"gutenkit-paste-button"},(0,o.__)("Gutenkit Paste Style","gutenkit-blocks-addon"));(0,t.registerPlugin)("gkit-copy-paste-style",{render:()=>(0,e.createElement)(s.BlockSettingsMenuControls,null,(t=>{const{onClose:s,selectedClientIds:n}=t;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(h,{selectedClientIds:n,onClose:s}),(0,e.createElement)(k,{selectedClientIds:n,onClose:s}))}))})})();